<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title> Flight Booking</title>
	<link href="css/style.css" rel="stylesheet" type="text/css" media="all">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="shortcut icon" type="image/png" href="img/favicon.png"/>

	<script src="js/info.js"></script>
</head>

<body>
        <% if(error=="error"){ %>
            <script>alert("please select a different flight")</script>
            <% } %>
	<div id="wrapper">
		<%- include('./header'); %>
		<div id="divider"></div>
		<div class="container">
                <div class="new-prof-info-head-c">
                    <h1><%=tripdet.title %></h1>
                    <div class="new-notch">
                        <div class="cover-dp"></div>
                        <div class="n-notch">
                            <a class="cover-name">Ryan Shirley </a>
                            <a class="cover-handle">@ryan.shirley</a>
                        </div>
                    </div>
                </div>
                <div id="divider"></div>
                <div class="prov-info-btn-c">
                    <div class="prov-info-btn-i1">
                        <h>Duration </h><br>
                        <%=tripdet.days %> Nights
                    </div>
                    <div class="prov-info-btn-i2">
                        <h>Locations</h><br>
                        Zakynthos, Metora and Athens
                    </div>
                    <div class="prov-info-btn-i3">info</div>
                    <div class="prov-info-btn-i4 prov-info-btn-sel">flights</div>
                    <div class="prov-info-btn-i5">itinerary</div>
                    <div class="prov-info-btn-i6">book</div>
    
                </div>
                <div id="divider"></div>
                <div class="new-flight-map">
                    <iframe width="930" height="315" src="<%= tripdet.link %>" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                </div>
                <div class="flight-booking-days-head">select the day for flights</div>
                <div class="flight-booking-days-wrapper">
                    <div class="flight-booking-days-arrow">
                        <svg viewBox="0 0 16 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <!-- Generator: sketchtool 51.2 (57519) - http://www.bohemiancoding.com/sketch -->
                            <title>674B890E-CFF7-4A73-A6B8-46E1D74714F0</title>
                            <desc>Created with sketchtool.</desc>
                            <defs></defs>
                            <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
                                <g id="Assets" transform="translate(-964.000000, -205.000000)">
                                    <polygon id="Shape-Copy-7" transform="translate(971.600000, 209.900000) rotate(-270.000000) translate(-971.600000, -209.900000) " points="968.521507 202.3 966.8 204.092345 972.817432 209.903883 966.8 215.707667 968.521507 217.5 975.469469 210.796189 976.4 209.903883 975.469469 209.003836"></polygon>
                                </g>
                            </g>
                        </svg>
                    </div>
                   <% for(var i=0;i<tripdet.days;i++){ %>
                       <% var startdate=dat %>
                       <% var new_date = moment(startdate, "YYYY-MM-DD"); %>
                       <% var thing = new_date.add((i+1), 'days'); %>
                       <% if(val==(i+1)){ %>
                        <div class="flight-booking-day flight-booking-day-sel ">
                                <div class="flight-booking-day-inner">
                                    <b>Day <%=(i+1)  %></b><br>
                                    <h>
                                       <%= moment(thing).format('dddd') %> </h>
                                </div>
                            </div>
                       <% }else{ %>
                        <% if(daybook[i]==(i+1)){ %>
                    <div class="flight-booking-day ">
                        <div class="flight-booking-day-inner">
                            <b>Day <%=(i+1) %></b><br>
                            <h>
                                    <%=  moment(thing).format('dddd') %> </h>
                        </div>
                    </div><% }else{ %>
                        <div class="flight-booking-day flight-booking-day-disabled ">
                            <div class="flight-booking-day-inner">
                                <b>Day <%=(i+1)  %></b><br>
                                <h>
                                        <%= moment(thing).format('dddd') %> </h>
                            </div>
                        </div>
                        <% } %>
                             
                    <% } %>
                    <% } %>
                    <div class="flight-booking-days-arrow flight-booking-days-arrow-r">
                        <svg viewBox="0 0 16 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <!-- Generator: sketchtool 51.2 (57519) - http://www.bohemiancoding.com/sketch -->
                            <title>674B890E-CFF7-4A73-A6B8-46E1D74714F0</title>
                            <desc>Created with sketchtool.</desc>
                            <defs></defs>
                            <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
                                <g id="Assets" transform="translate(-964.000000, -205.000000)">
                                    <polygon id="Shape-Copy-7" transform="translate(971.600000, 209.900000) rotate(-270.000000) translate(-971.600000, -209.900000) " points="968.521507 202.3 966.8 204.092345 972.817432 209.903883 966.8 215.707667 968.521507 217.5 975.469469 210.796189 976.4 209.903883 975.469469 209.003836"></polygon>
                                </g>
                            </g>
                        </svg>
                    </div>
                </div>
                <div id="divider"></div>
                <div class="new-landing-bar landing-bar">
                    <div id="filter" class="bl-box">Filter</div>
                    <div id="by-price">By Price</div>
                    <div id="by-price">By Fastest Route</div>
                    <div id="by-price">By Least Stopovers</div>
    
                </div>
                
                <% for(var i=0;i<allf.length;i++){  %>
         <div id="moreinformation<%= i %>" class="fl-hide">
            <div class="flight-up">
                <div class="flight-up-inner">
                    <div class="fl-logo-tl">
                        <div><img src="img/flight.svg"></div>
    
                        <div class="new-fl-timeline">
                            <div class="new-fl-tl-time-cn">
                                    <%=  moment(allf[i].FlightDetails[0].DepartureDateTime).format('HH:mm'); %>
                                    <% var g=allf[i].Connection.Onward.NoOfStops %>
                                <br>
                                <h><%= allf[i].FlightDetails[0].Origin %></h>
                            </div>
                            <% if(g==0){ %>
                            <div class="new-fl-time new-fl-time-full">
                                    <% var quotient = Math.floor(allf[i].FlightDetails[0].Duration/60); %>
                                    <% var remainder = allf[i].FlightDetails[0].Duration % 60; %> 
                                <div class="new-time-del "><%=quotient  %> hrs <%=remainder %> m</div>
                                <div class="tl-line"></div>
                            </div>
                            <% }else{ %>
                                <div class="new-fl-time new-fl-time-<%= (g+1) %>">
                                        <% var quotient = Math.floor(allf[i].FlightDetails[0].Duration/60); %>
                                        <% var remainder = allf[i].FlightDetails[0].Duration % 60; %> 
                                        <div class="new-time-del "><%=quotient  %> hrs <%=remainder %> m</div>
                                        <div class="tl-line"></div>
                                </div>
                                  <% for(var a=0;a<g;a++){ %>
                                        <div class="new-fl-tl-time-cn">
                                                <%=  moment(allf[i].FlightDetails[a].ArrivalDateTime).format('HH:mm'); %><br>
                                                <h> <%= allf[i].FlightDetails[a].Destination %></h>
                                                <div class="new-fl-red"></div>
                                                <% var start=allf[i].FlightDetails[a].ArrivalDateTime %>
                                                <% var end=allf[i].FlightDetails[(a+1)].DepartureDateTime %>
                                                <% var _duration = moment.duration(moment(end).diff(start)); %>
                                                <% var _hours = _duration.asMinutes(); %>
                                                <% var quotient = Math.floor(_hours/60); %>
                                                <% var remainder = _hours % 60; %>    
                                                <div class="new-fl-layover-time"><%= quotient  %> hrs <%=remainder %><br><b>
                                                layover</b></div>
                                        </div>
                                        <div class="new-fl-time new-fl-time-<%= (g+1) %>">
                                                <% var quotient = Math.floor(allf[i].FlightDetails[(a+1)].Duration/60); %>
                                                <% var remainder = allf[i].FlightDetails[(a+1)].Duration % 60; %> 
                                        
                                                <div class="new-time-del "><%= quotient %> hrs <%=remainder  %> m</div>
                                                <div class="tl-line"></div>
                                        </div>
                                      <% } %>
                                <% } %>
     <div class="new-fl-tl-time-cn">
            <%=  moment(allf[i].FlightDetails[g].ArrivalDateTime).format('HH:mm'); %>
    
                                <br>
                                <h><%= allf[i].FlightDetails[g].Destination %></h>
                            </div>
    
                        </div>
                    </div>
                    <div id="divider"></div>
                    <div class="fl-name-action">
                        <div class="fl-name-info">
                            <div class="new-fl-name">Multiple Airlines</div>
                            <div class="new-fl-close" onclick="showmoreinfo('moreinformation<%= i %>','innerchange<%=i %>')">
                               <span id="innerchange<%=i  %>"> Show more Information </span>
                                <svg class="close " viewBox="0 0 16 10" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                                    <!-- Generator: sketchtool 51.2 (57519) - http://www.bohemiancoding.com/sketch -->
                                    <title>674B890E-CFF7-4A73-A6B8-46E1D74714F0</title>
                                    <desc>Created with sketchtool.</desc>
                                    <defs></defs>
                                    <g id="Page-1" stroke="none" stroke-width="1" fill-rule="evenodd">
                                        <g id="Assets" transform="translate(-964.000000, -205.000000)">
                                            <polygon id="Shape-Copy-7" transform="translate(971.600000, 209.900000) rotate(-270.000000) translate(-971.600000, -209.900000) " points="968.521507 202.3 966.8 204.092345 972.817432 209.903883 966.8 215.707667 968.521507 217.5 975.469469 210.796189 976.4 209.903883 975.469469 209.003836"></polygon>
                                        </g>
                                    </g>
                                </svg></div>
                               
                        </div>
                        <div class="fl-btn-price">
                            <div class="fl-price">
                                <div class="currn"><%= allf[i].FlightDetails[0].CurrencyCode %> </div>
                                <div class="tot"><%= allf[i].FareDescription.PaxFareDetails[0].OtherInfo.GrossAmount %></div>
                            </div>
                           
                            <% if(error=="error"){ %>
                              
                                <a href="/flightdetails?parm=<%= i %>&parm2=<%= val %>"> <div class="new-fl-box-submit" >Select this Flight</div></a>
                               
                                <% }else if(selected==i){ %>
                                    <div class="new-fl-box-submit rem-added" >Selected</div>

                          <% }else{ %>
                            <a href="/flightdetails?parm=<%= i %>&parm2=<%= val %>"> <div class="new-fl-box-submit" >Select this Flight</div></a>

                            <% } %>                       
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="flight-low">
                <div class="vr-line">
    
                </div>
                <div class="new-fl-flight">
                    <div class="new-fl-flight-inner">
                        <div class="new-fl-flight-head-cn">
                            <div class="new-fl-flight-to-from"><%= allf[i].FlightDetails[0].Origin %> to <%= allf[i].FlightDetails[0].Destination %></div>
                            <div class="new-fl-flight-head-info">
                                <h><b><%= allf[i].FlightDetails[0].AirlineName %></b></h>
                                <h><%= allf[i].FlightDetails[0].FlightNum %></h>
                                <h>Economy (A)</h>
    
                            </div>
    
                        </div>
                        <div class="new-fl-flight-down">
                            <div class="new-fl-flight-down-col1">
                                <b><%= allf[i].FlightDetails[0].Origin %></b><br><br>
    
                                <%=  moment(allf[i].FlightDetails[0].DepartureDateTime).format('DD MMM YYYY HH:mm'); %>
                                <br><br>
                                <%= allf[i].FlightDetails[0].OriginAirportName %><br>
                                <%= allf[i].FlightDetails[0].OriginAirportCity %><br>
                                Terminal : <%= allf[i].FlightDetails[0].OrgTerminal %></div>
                            <div class="new-fl-flight-down-col1">
                                <b><%= allf[i].FlightDetails[0].Destination %></b><br><br>
    
                                <%=  moment(allf[i].FlightDetails[0].ArrivalDateTime).format('DD MMM YYYY HH:mm'); %>
    
                                <br><br>
                                <%= allf[i].FlightDetails[0].DestinationAirportName %><br>
                                <%= allf[i].FlightDetails[0].DestinationAirportCity %><br>
                                Terminal : <%= allf[i].FlightDetails[0].DesTerminal %></div>
                            <div class="new-fl-flight-down-col2"><br>
                                <% if(allf[i].FlightDetails[0].Baggage.Pieces==null && allf[i].FlightDetails[0].Baggage.Weight==""){ %>
                                    Unknown baggage<br>
                                    <% }else{ %>
                                        <% if(allf[i].FlightDetails[0].Baggage.Pieces>0){ %>
                                <%= allf[i].FlightDetails[0].Baggage.Pieces %> Piece baggage<br>
                                <% } %>
                                <% if(allf[i].FlightDetails[0].Baggage.Weight>=15){ %>
                                    <%= allf[i].FlightDetails[0].Baggage.Weight %> Kg baggage<br>
                                    <%}%>
                                <% } %>
                                
                                    
                                        7 Kg cabin & laptop<br>
                                
                                <% if(allf[i].FlightDetails[0].AirCraftType==null){ %>
                                    Unknown Aircraft<br>
                                    <% }else{ %>
                                        <%= allf[i].FlightDetails[0].AirCraftType %> Aircraft<br>
                                <% } %>
                                <% if(allf[i].FlightDetails[0].MealCode.MealCodeDescription==null){ %>
                                    No free meals<br>
                                    <% }else{ %>
                                        <%= allf[i].FlightDetails[0].MealCode.MealCodeDescription %> <br>
                                <% } %>
                              
                               
                            </div>
    
                        </div>
                    </div>
                </div>
                
            </div>
            <% for(q=1;q<=g;q++){ %>
              <div class="flight-low fl-layover" >
                <div class="vr-line">
    
                </div>
                <div class="new-fl-flight ">
                    <div class="new-fl-flight-inner">
                        <div class="new-fl-flight-head-cn">
  
                                <% var start=allf[i].FlightDetails[q-1].ArrivalDateTime %>
                                <% var end=allf[i].FlightDetails[(q)].DepartureDateTime %>
                                <% var _duration = moment.duration(moment(end).diff(start)); %>
                                <% var _hours = _duration.asMinutes(); %>
                                <% var quotient = Math.floor(_hours/60); %>
                                 <% var remainder = _hours % 60; %>    
                            <div class="new-fl-flight-to-from">layover</div>
                            <div class="new-fl-flight-head-info">
                                <h><b><%= quotient  %> hrs <%=remainder %> m duration</b></h>
                               
    
                            </div>
    
                        </div>
              
                    </div>
                </div>
                
            </div>
            
           <div class="flight-low">
                <div class="vr-line">
    
                </div>
                <div class="new-fl-flight">
                    <div class="new-fl-flight-inner">
                        <div class="new-fl-flight-head-cn">
                            <div class="new-fl-flight-to-from"><%= allf[i].FlightDetails[q].Origin %> to <%= allf[i].FlightDetails[q].Destination %></div>
                            <div class="new-fl-flight-head-info">
                                <h><b><%= allf[i].FlightDetails[0].AirlineName %></b></h>
                                <h><%= allf[i].FlightDetails[0].FlightNum %></h>
                                <h>Economy (A)</h>
    
                            </div>
    
                        </div>
                        <div class="new-fl-flight-down">
                            <div class="new-fl-flight-down-col1">
                                <b><%= allf[i].FlightDetails[q].Origin %></b><br><br>
    
                                <%=  moment(allf[i].FlightDetails[q].DepartureDateTime).format('DD MMM YYYY HH mm'); %>
                                <br><br>
                                <%= allf[i].FlightDetails[q].OriginAirportName %><br>
                                <%= allf[i].FlightDetails[q].OriginAirportCity %><br>
                                Terminal : <%= allf[i].FlightDetails[q].OrgTerminal %></div>
                            <div class="new-fl-flight-down-col1">
                                <b><%= allf[i].FlightDetails[q].Destination %></b><br><br>
    
                                <%=  moment(allf[i].FlightDetails[q].ArrivalDateTime).format('DD MMM YYYY HH mm'); %>
    
                                <br><br>
                                <%= allf[i].FlightDetails[q].DestinationAirportName %><br>
                                <%= allf[i].FlightDetails[q].DestinationAirportCity %><br>
                                Terminal : <%= allf[i].FlightDetails[q].DesTerminal %></div>
                                <div class="new-fl-flight-down-col2"><br>
                                    <% if(allf[i].FlightDetails[q].Baggage.Pieces==null && allf[i].FlightDetails[q].Baggage.Weight==""){ %>
                                        Unknown baggage<br>
                                        <% }else{ %>
                                            <% if(allf[i].FlightDetails[q].Baggage.Pieces>0){ %>
                                    <%= allf[i].FlightDetails[q].Baggage.Pieces %> Piece baggage<br>
                                    <% } %>
                                    <% if(allf[i].FlightDetails[q].Baggage.Weight>=15){ %>
                                        <%= allf[i].FlightDetails[q].Baggage.Weight %> Kg baggage<br>
                                        <%}%>
                                    <% } %>
                                    7 Kg cabin & laptop<br>
                                    <% if(allf[i].FlightDetails[q].AirCraftType==null){ %>
                                        Unknown Aircraft<br>
                                        <% }else{ %>
                                            <%= allf[i].FlightDetails[q].AirCraftType %> Aircraft<br>
                                    <% } %>
                                    <% if(allf[i].FlightDetails[0].MealCode.MealCodeDescription==null){ %>
                                        No free meals<br>
                                        <% }else{ %>
                                            <%= allf[i].FlightDetails[0].MealCode.MealCodeDescription %> <br>
                                    <% } %>
                                  
                                   
                                </div>
    
                        </div>
                    </div>
                </div>
                
            </div>
            <% } %>
         
        </div>
        <% } %>
            </div>
	</div>
    <div class="footer-space"></div>
	<div id="footer">
		<div id="divider"></div>
        <div class="footer-inner">
            <div class="footer-text"><h> Next Step</h>: Choose your Itinerary Elements</div>
          <!-- <% if(tripdet.days!=val){ %>
            <% if(nextval!=null){ %>
             <a href="/flightnext?parama=<%= nextval %>"> 	<button class="pref-submit">Choose Flights for Next Day</button></a>
             <% }else{ %>
                <a href=""> 	<button class="pref-submit">Choose Flights for Next Day</button></a>
                <% }} %> -->
		<a href="/exbook?par=1"><button class="pref-submit pref-submit-green">Next Section</button></a>
        
        </div>
	</div>
</body>

</html>
